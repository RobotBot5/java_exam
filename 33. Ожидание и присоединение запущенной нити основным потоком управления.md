В Java основной поток управления может ожидать завершения выполнения другой нити с использованием метода `join()`. Этот механизм полезен, когда основному потоку необходимо дождаться окончания работы другой нити перед продолжением своего выполнения. Рассмотрим подробнее, как использовать ожидание и присоединение нити.

### Метод `join()`

Метод `join()` позволяет основному потоку ожидать завершения выполнения другой нити. Основной поток будет заблокирован до тех пор, пока не завершится нить, для которой вызван `join()`.

#### Пример использования `join()`:

```java

public class JoinExample {

    public static void main(String[] args) throws InterruptedException {

        Thread thread = new Thread(() -> {

            System.out.println("Нить начала выполнение.");

            try {

                Thread.sleep(3000); // имитация работы нити

            } catch (InterruptedException e) {

                e.printStackTrace();

            }

            System.out.println("Нить завершила выполнение.");

        });

        thread.start(); // запуск нити

        System.out.println("Основной поток ждет завершения нити.");

        thread.join(); // ожидание завершения нити

        System.out.println("Основной поток продолжает выполнение после завершения нити.");

    }

}

```

В этом примере:

1. Создается новая нить `thread`, которая выполняет какую-то работу в фоновом режиме.

2. Нить запускается методом `start()`.

3. Основной поток вызывает `join()` для нити `thread`, что приводит к блокировке основного потока до завершения выполнения нити `thread`.

4. После завершения нити `thread`, основной поток продолжает свое выполнение.

### Параметры метода `join()`

Метод `join()` может быть вызван с параметрами, указывающими максимальное время ожидания завершения нити:

- **`join()`**: Ожидает завершения нити до тех пор, пока она не завершится.

- **`join(long millis)`**: Ожидает завершения нити не более указанного количества миллисекунд.

- **`join(long millis, int nanos)`**: Ожидает завершения нити не более указанного количества миллисекунд и наносекунд.

### Присоединение нескольких нитей

Основной поток также может ожидать завершения выполнения нескольких нитей, вызывая `join()` для каждой из них по очереди.

```java

Thread thread1 = new Thread(() -> {

    // работа нити 1

});

Thread thread2 = new Thread(() -> {

    // работа нити 2

});

thread1.start();

thread2.start();

// Ожидание завершения выполнения обеих нитей

thread1.join();

thread2.join();

```

### Исключения при использовании `join()`

Метод `join()` может сгенерировать `InterruptedException`, если текущий поток был прерван во время ожидания завершения нити. Это исключение необходимо перехватывать и обрабатывать.

```java

try {

    thread.join();

} catch (InterruptedException e) {

    e.printStackTrace();

}

```

### Заключение

Метод `join()` в Java является мощным инструментом для координации выполнения потоков. Он позволяет основному потоку ждать завершения работы других нитей, что полезно в сценариях, требующих синхронизации между потоками или ожидания результатов работы асинхронных задач.